!function(e,i){"object"==typeof exports&&"undefined"!=typeof module?module.exports=i():"function"==typeof define&&define.amd?define(i):e.isValidEmail=i()}(this,function(){"use strict";function e(e){var i=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],r=new t;return r.validate(e,n,i)}var i=function(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,i){for(var n=0;n<i.length;n++){var t=i[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(i,n,t){return n&&e(i.prototype,n),t&&e(i,t),i}}(),t=function(){function e(){i(this,e),this.atomCharacters="!#$%&'*+-/=?^_`{|}~",this.index=0}return n(e,[{key:"isLetterOrDigit",value:function(e){return e>="A"&&e<="Z"||e>="a"&&e<="z"||e>="0"&&e<="9"}},{key:"isAtom",value:function(e,i){return e.charCodeAt(0)<128?this.isLetterOrDigit(e)||this.atomCharacters.indexOf(e)!==-1:i}},{key:"isDomain",value:function(e,i){return e.charCodeAt(0)<128?this.isLetterOrDigit(e)||"-"===e:i}},{key:"skipAtom",value:function(e,i){for(var n=this,t=n.index;n.index<e.length&&n.isAtom(e[n.index],i);)n.index++;return n.index>t}},{key:"skipSubDomain",value:function(e,i){var n=this,t=n.index;if(!n.isDomain(e[n.index],i)||"-"===e[n.index])return!1;for(n.index++;n.index<e.length&&n.isDomain(e[n.index],i);)n.index++;return n.index-t<64&&"-"!==e[n.index-1]}},{key:"skipDomain",value:function(e,i,n){var t=this;if(!t.skipSubDomain(e,n))return!1;if(t.index<e.length&&"."===e[t.index]){do{if(t.index++,t.index===e.length)return!1;if(!t.skipSubDomain(e,n))return!1}while(t.index<e.length&&"."===e[t.index])}else if(!i)return!1;return!0}},{key:"skipQuoted",value:function(e,i){var n=this,t=!1;for(n.index++;n.index<e.length;){if(e.charCodeAt(this.index)>=128&&!i)return!1;if("\\"===e[n.index])t=!t;else if(t)t=!1;else if('"'===e[n.index])break;n.index++}return!(n.index>=e.length||'"'!==e[n.index])&&(n.index++,!0)}},{key:"skipWord",value:function(e,i){var n=this;return'"'===e[n.index]?n.skipQuoted(e,i):n.skipAtom(e,i)}},{key:"skipIPv4Literal",value:function(e){for(var i=this,n=0;i.index<e.length&&n<4;){for(var t=i.index,r=0;i.index<e.length&&e[i.index]>="0"&&e[i.index]<="9";)r=10*r+(e[i.index]-"0"),i.index++;if(i.index===t||i.index-t>3||r>255)return!1;n++,n<4&&i.index<e.length&&"."===e[i.index]&&i.index++}return 4===n}},{key:"isHexDigit",value:function(e){return e>="A"&&e<="F"||e>="a"&&e<="f"||e>="0"&&e<="9"}},{key:"skipIPv6Literal",value:function(e){for(var i=this,n=!1,t=0;i.index<e.length;){for(var r=i.index;i.index<e.length&&i.isHexDigit(e[i.index]);)i.index++;if(i.index>=e.length)break;if(i.index>r&&t>2&&"."===e[i.index])return i.index=r,!!i.skipIPv4Literal(e)&&(n?t<6:6===t);var d=i.index-r;if(d>4)return!1;if(":"!==e[i.index])break;for(r=i.index;i.index<e.length&&":"===e[i.index];)i.index++;if(d=i.index-r,d>2)return!1;if(2===d){if(n)return!1;n=!0,t+=2}else t++}return!(t<2)&&(n?t<7:7===t)}},{key:"validate",value:function(e){var i=!(arguments.length<=1||void 0===arguments[1])&&arguments[1],n=!(arguments.length<=2||void 0===arguments[2])&&arguments[2],t=this;if(!e)return!1;if(!e.length||e.length>=255)return!1;if(!t.skipWord(e,n)||t.index>=e.length)return!1;for(;"."===e[t.index];){if(t.index++,t.index>=e.length)return!1;if(!t.skipWord(e,n))return!1;if(t.index>=e.length)return!1}if(t.index+1>=e.length||t.index>64||"@"!==e[t.index++])return!1;if("["!==e[t.index])return!!t.skipDomain(e,i,n)&&t.index===e.length;if(t.index++,t.index+8>=e.length)return!1;var r=e.substr(t.index,5);if("ipv6:"===r.toLowerCase()){if(t.index+="IPv6:".length,!t.skipIPv6Literal(e))return!1}else if(!t.skipIPv4Literal(e,this.index))return!1;return!(t.index>=e.length||"]"!==e[t.index++])&&t.index===e.length}}]),e}();return e});